/*! 
Luga CSI 1.1.1 2015-12-29T22:18:24.634Z
Copyright 2013-2015 Massimo Foti (massimo@massimocorner.com)
Licensed under the Apache License, Version 2.0 | http://www.apache.org/licenses/LICENSE-2.0
 */
if("undefined"==typeof luga)throw"Unable to find Luga JS Core";!function(){"use strict";luga.namespace("luga.csi"),luga.csi.version="1.1.1",luga.csi.CONST={NODE_SELECTOR:"div[data-lugacsi]",URL_ATTRIBUTE:"data-lugacsi",AFTER_ATTRIBUTE:"data-lugacsi-after",USER_AGENT:"luga.csi",MESSAGES:{FILE_NOT_FOUND:"luga.csi failed to retrieve text from: {0}"}},luga.csi.Include=function(options){var onSuccess=function(response,textStatus,jqXHR){jQuery(config.rootNode).html(response)},onError=function(qXHR,textStatus,errorThrown){throw luga.string.format(luga.csi.CONST.MESSAGES.FILE_NOT_FOUND,[config.url])},config={url:jQuery(options.rootNode).attr(luga.csi.CONST.URL_ATTRIBUTE),after:jQuery(options.rootNode).attr(luga.csi.CONST.AFTER_ATTRIBUTE),success:onSuccess,error:onError,xhrTimeout:5e3};luga.merge(config,options),this.load=function(){jQuery.ajax({url:config.url,timeout:config.XHR_TIMEOUT,headers:{"X-Requested-With":luga.csi.CONST.USER_AGENT},success:function(response,textStatus,jqXHR){config.success.apply(null,[response,textStatus,jqXHR]);var afterHandler=luga.lookupFunction(config.after);void 0!==afterHandler&&afterHandler.apply(null,[config.rootNode,config.url,response])},error:function(jqXHR,textStatus,errorThrown){config.error.apply(null,[jqXHR,textStatus,errorThrown])}})}},luga.csi.loadIncludes=function(){jQuery(luga.csi.CONST.NODE_SELECTOR).each(function(index,item){var includeObj=new luga.csi.Include({rootNode:item});includeObj.load()})},jQuery(document).ready(function(){luga.csi.loadIncludes()})}();
//# sourceMappingURL=luga.csi.min.js.map
