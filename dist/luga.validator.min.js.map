{"version":3,"sources":["luga.validator.js"],"names":["luga","namespace","validator","handlers","errorAlert","formNode","validators","errorMsg","focusGiven","i","length","message","getFocus","alert","errorBox","htmlStr","name","utils","displayErrorMessage","removeDisplayBox","CONST","FORM_SELECTOR","RULE_PREFIX","DEFAULT_DATE_PATTERN","CUSTOM_ATTRIBUTES","VALIDATE","ERROR","BEFORE","AFTER","BLOCK_SUBMIT","MESSAGE","ERROR_CLASS","REQUIRED","PATTERN","MIN_LENGTH","MAX_LENGTH","MIN_NUMBER","MAX_NUMBER","DATE_PATTERN","MIN_DATE","MAX_DATE","EQUAL_TO","MIN_CHECKED","MAX_CHECKED","INVALID_INDEX","INVALID_VALUE","DISABLED_MESSAGE","MESSAGES","MISSING_FORM","MISSING_FIELD","MISSING_FUNCTION","BASE_VALIDATOR_ABSTRACT","GROUP_VALIDATOR_ABSTRACT","FIELD_CANT_BE_VALIDATED","PATTERN_NOT_FOUND","INVALID_INDEX_PARAMETER","MISSING_EQUAL_TO_FIELD","HANDLERS","FORM_ERROR","FormValidator","options","this","config","blocksubmit","jQuery","attr","error","before","after","merge","JSON","parse","self","dirtyValidators","init","formDom","elements","form","isInputField","push","fieldValidatorFactory","getInstance","fieldNode","validate","event","executedValidators","undefined","isValid","preventDefault","disableSubmit","buttons","each","index","item","buttonNode","val","callBack","lookupFunction","string","format","apply","prop","SelectValidator","RadioValidator","inputGroup","getFieldGroup","CheckboxValidator","TextValidator","BaseFieldValidator","constructor","errorclass","node","flagInvalid","addClass","flagValid","removeClass","removeAttr","required","pattern","minlength","maxlength","minnumber","maxnumber","datepattern","mindate","maxdate","equalto","extend","e","type","focus","select","isEmpty","isRequired","requiredAtt","functionReference","rule","rules","invalidindex","invalidvalue","isNumeric","currentIndex","parseInt","BaseGroupValidator","field","requiredFlag","fieldGroup","minchecked","maxchecked","checkCounter","email","fieldValue","containsAt","indexOf","containDot","secondFieldNode","dateStrToObj","valueDate","maxDate","minDate","parseFloat","regExpObj","patterns","test","lettersonly","RegExp","alphanumeric","integer","positiveinteger","number","filepath_pdf","filepath_jpg","filepath_zip","filepath","time","createDateSpecObj","rex","year","month","day","separator","infoObj","y","m","d","s","dateStr","dateSpecKey","dateSpecObj","dateSpecs","dateBits","split","testDate","Date","yearMatches","getFullYear","monthMatches","getMonth","dayMatches","getDate","initForms","rootNode","document","body","nodes","querySelectorAll","element","getAttribute","addEventListener","api","validateForm","formValidator","validateField","fieldValidator","validateFields","fields","j","validateChildFields","getChildFields","dom","ready"],"mappings":"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","file":"luga.validator.min.js","sourcesContent":["/*! \nLuga Validator 0.9.7 2018-04-02T15:20:38.122Z\nhttp://www.lugajs.org\nCopyright 2013-2018 Massimo Foti (massimo@massimocorner.com)\nLicensed under the Apache License, Version 2.0 | http://www.apache.org/licenses/LICENSE-2.0\n */\n/* globals alert */\r\n\r\n/* istanbul ignore if */\r\nif(typeof(luga) === \"undefined\"){\r\n\tthrow(\"Unable to find Luga JS Core\");\r\n}\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tluga.namespace(\"luga.validator\");\r\n\r\n\t/* Validation handlers */\r\n\r\n\tluga.namespace(\"luga.validator.handlers\");\r\n\r\n\t/**\r\n\t * Display error messages inside alert\r\n\t *\r\n\t * @param {jQuery}                                      formNode      jQuery object wrapping the form\r\n\t * @param {Array.<luga.validator.BaseFieldValidator>}   validators    Array of field validators\r\n\t */\r\n\tluga.validator.handlers.errorAlert = function(formNode, validators){\r\n\t\tvar errorMsg = \"\";\r\n\t\tvar focusGiven = false;\r\n\t\tfor(var i = 0; i < validators.length; i++){\r\n\t\t\t// Append to the error string\r\n\t\t\terrorMsg += validators[i].message + \"\\n\";\r\n\t\t\t// Give focus to the first invalid text field\r\n\t\t\t/* istanbul ignore else */\r\n\t\t\tif((focusGiven === false) && (validators[i].getFocus)){\r\n\t\t\t\tvalidators[i].getFocus();\r\n\t\t\t\tfocusGiven = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t/* istanbul ignore else */\r\n\t\tif(errorMsg !== \"\"){\r\n\t\t\talert(errorMsg);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Display errors inside a box above the form\r\n\t *\r\n\t * @param {jQuery}                                      formNode      jQuery object wrapping the form\r\n\t * @param {Array.<luga.validator.BaseFieldValidator>}   validators    Array of field validators\r\n\t */\r\n\tluga.validator.handlers.errorBox = function(formNode, validators){\r\n\t\t// Clean-up any existing box\r\n\t\tif(validators.length === 0){\r\n\t\t\tluga.utils.removeDisplayBox(formNode);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar focusGiven = false;\r\n\t\tvar htmlStr = \"<ul>\";\r\n\t\t// Create a <ul> for each error\r\n\t\tfor(var i = 0; i < validators.length; i++){\r\n\t\t\thtmlStr += \"<li><em>\" + validators[i].name + \": </em> \" + validators[i].message + \"</li>\";\r\n\t\t\t// Give focus to the first invalid text field\r\n\t\t\tif((focusGiven === false) && (validators[i].getFocus)){\r\n\t\t\t\tvalidators[i].getFocus();\r\n\t\t\t\tfocusGiven = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\thtmlStr += \"</ul>\";\r\n\t\tluga.utils.displayErrorMessage(formNode, htmlStr);\r\n\t};\r\n\r\n\tluga.validator.CONST = {\r\n\t\tFORM_SELECTOR: \"form[data-lugavalidator-validate]\",\r\n\t\tRULE_PREFIX: \"data-lugavalidator-\",\r\n\t\tDEFAULT_DATE_PATTERN: \"YYYY-MM-DD\",\r\n\t\tCUSTOM_ATTRIBUTES: {\r\n\t\t\tVALIDATE: \"data-lugavalidator-validate\",\r\n\t\t\tERROR: \"data-lugavalidator-error\",\r\n\t\t\tBEFORE: \"data-lugavalidator-before\",\r\n\t\t\tAFTER: \"data-lugavalidator-after\",\r\n\t\t\tBLOCK_SUBMIT: \"data-lugavalidator-blocksubmit\",\r\n\t\t\tMESSAGE: \"data-lugavalidator-message\",\r\n\t\t\tERROR_CLASS: \"data-lugavalidator-errorclass\",\r\n\t\t\tREQUIRED: \"data-lugavalidator-required\",\r\n\t\t\tPATTERN: \"data-lugavalidator-pattern\",\r\n\t\t\tMIN_LENGTH: \"data-lugavalidator-minlength\",\r\n\t\t\tMAX_LENGTH: \"data-lugavalidator-maxlength\",\r\n\t\t\tMIN_NUMBER: \"data-lugavalidator-minnumber\",\r\n\t\t\tMAX_NUMBER: \"data-lugavalidator-maxnumber\",\r\n\t\t\tDATE_PATTERN: \"data-lugavalidator-datepattern\",\r\n\t\t\tMIN_DATE: \"data-lugavalidator-mindate\",\r\n\t\t\tMAX_DATE: \"data-lugavalidator-maxdate\",\r\n\t\t\tEQUAL_TO: \"data-lugavalidator-equalto\",\r\n\t\t\tMIN_CHECKED: \"data-lugavalidator-minchecked\",\r\n\t\t\tMAX_CHECKED: \"data-lugavalidator-maxchecked\",\r\n\t\t\tINVALID_INDEX: \"data-lugavalidator-invalidindex\",\r\n\t\t\tINVALID_VALUE: \"data-lugavalidator-invalidvalue\",\r\n\t\t\tDISABLED_MESSAGE: \"data-lugavalidator-disabledlabel\"\r\n\t\t},\r\n\t\tMESSAGES: {\r\n\t\t\tMISSING_FORM: \"luga.validator was unable to load form\",\r\n\t\t\tMISSING_FIELD: \"luga.validator was unable to load field\",\r\n\t\t\tMISSING_FUNCTION: \"luga.validator was unable to find a function named: {0}\",\r\n\t\t\tBASE_VALIDATOR_ABSTRACT: \"luga.validator.BaseFieldValidator is an abstract class\",\r\n\t\t\tGROUP_VALIDATOR_ABSTRACT: \"luga.validator.BaseGroupValidator is an abstract class\",\r\n\t\t\tFIELD_CANT_BE_VALIDATED: \"This field can't be validated\",\r\n\t\t\tPATTERN_NOT_FOUND: \"luga.validator failed to retrieve pattern: {0}\",\r\n\t\t\tINVALID_INDEX_PARAMETER: \"data-lugavalidator-invalidindex accept only numbers\",\r\n\t\t\tMISSING_EQUAL_TO_FIELD: \"data-lugavalidator-equalto was unable to find field with id = {0}\"\r\n\t\t},\r\n\t\tHANDLERS: {\r\n\t\t\tFORM_ERROR: \"luga.validator.handlers.errorAlert\"\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.FormValidator.options\r\n\t *\r\n\t * @property {jQuery}  formNode      Either a jQuery object wrapping the form or the naked DOM object. Required\r\n\t * @property {String}  error         Name of the function to be invoked to handle/display validation messages.\r\n\t *                                   Default to luga.validator.errorAlert\r\n\t * @property {String}  before        Name of the function to be invoked before validation is performed. Default to null\r\n\t * @property {String}  after         Name of the function to be invoked after validation is performed. Default to null\r\n\t * @property {Boolean} blocksubmit   Disable submit buttons if the form isn't valid\r\n\t *                                   This prevents multiple submits but also prevents the value of the submit buttons from being passed as part of the HTTP request\r\n\t *                                   Set this options to false to keep the submit buttons enabled\r\n\t */\r\n\r\n\t/**\r\n\t * Form validator class\r\n\t *\r\n\t * @constructor\r\n\t * @param {luga.validator.FormValidator.options} options\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.FormValidator = function(options){\r\n\t\t/** @type {luga.validator.FormValidator.options} */\r\n\t\tthis.config = {\r\n\t\t\t// Either: custom attribute, incoming option or default\r\n\t\t\tblocksubmit: jQuery(options.formNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.BLOCK_SUBMIT) || \"true\",\r\n\t\t\terror: jQuery(options.formNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.ERROR) || luga.validator.CONST.HANDLERS.FORM_ERROR,\r\n\t\t\t// Either: custom attribute, incoming option or null\r\n\t\t\tbefore: jQuery(options.formNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.BEFORE) || null,\r\n\t\t\tafter: jQuery(options.formNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.AFTER) || null\r\n\t\t};\r\n\t\tluga.merge(this.config, options);\r\n\t\t// Hack to ensure it's a boolean\r\n\t\tthis.config.blocksubmit = JSON.parse(this.config.blocksubmit);\r\n\r\n\t\t/** @type {luga.validator.FormValidator} */\r\n\t\tvar self = this;\r\n\t\t/** @type {Array.<luga.validator.BaseFieldValidator>} */\r\n\t\tself.validators = [];\r\n\t\t/** @type {Array.<luga.validator.BaseFieldValidator>} */\r\n\t\tself.dirtyValidators = [];\r\n\t\t// Ensure it's a jQuery object\r\n\t\tself.config.formNode = jQuery(self.config.formNode);\r\n\r\n\t\tif(jQuery(self.config.formNode).length === 0){\r\n\t\t\tthrow(luga.validator.CONST.MESSAGES.MISSING_FORM);\r\n\t\t}\r\n\r\n\t\tthis.init = function(){\r\n\t\t\tself.validators = [];\r\n\t\t\tself.dirtyValidators = [];\r\n\t\t\tvar formDom = self.config.formNode[0];\r\n\t\t\tfor(var i = 0; i < formDom.elements.length; i++){\r\n\t\t\t\t/* istanbul ignore else */\r\n\t\t\t\tif(luga.form.utils.isInputField(formDom.elements[i]) === true){\r\n\t\t\t\t\tself.validators.push(luga.validator.fieldValidatorFactory.getInstance({\r\n\t\t\t\t\t\tfieldNode: formDom.elements[i],\r\n\t\t\t\t\t\tformNode: self.config.formNode\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Execute all field validators. Returns an array of field validators that are in invalid state\r\n\t\t * The returned array is empty if there are no errors\r\n\t\t *\r\n\t\t * @param   {Object} event\r\n\t\t * @return {Array.<luga.validator.BaseFieldValidator>}\r\n\t\t */\r\n\t\tthis.validate = function(event){\r\n\t\t\tself.init();\r\n\t\t\tself.before(event);\r\n\t\t\t// Keep track of already validated fields (to skip already validated checkboxes or radios)\r\n\t\t\tvar executedValidators = {};\r\n\t\t\tfor(var i = 0; i < self.validators.length; i++){\r\n\t\t\t\tif((self.validators[i] !== undefined) && (self.validators[i].validate !== undefined)){\r\n\t\t\t\t\tif(executedValidators[self.validators[i].name] !== undefined){\r\n\t\t\t\t\t\t// Already validated checkbox or radio, skip it\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(self.validators[i].validate() === true){\r\n\t\t\t\t\t\tself.dirtyValidators.push(self.validators[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\texecutedValidators[self.validators[i].name] = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(self.isValid() === false){\r\n\t\t\t\tself.error();\r\n\t\t\t\tif(event !== undefined){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(this.config.blocksubmit === true){\r\n\t\t\t\t\t// Disable submit buttons to avoid multiple submits\r\n\t\t\t\t\tself.disableSubmit();\r\n\t\t\t\t}\r\n\t\t\t\tself.after(event);\r\n\t\t\t}\r\n\t\t\treturn self.dirtyValidators;\r\n\t\t};\r\n\r\n\t\tthis.disableSubmit = function(){\r\n\t\t\tvar buttons = jQuery(\"input[type=submit]\", self.config.formNode);\r\n\t\t\tjQuery(buttons).each(function(index, item){\r\n\t\t\t\tvar buttonNode = jQuery(item);\r\n\t\t\t\tif(buttonNode.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.DISABLED_MESSAGE) !== undefined){\r\n\t\t\t\t\tbuttonNode.val(buttonNode.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.DISABLED_MESSAGE));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Returns truue if the form is valid, false otherwise\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isValid = function(){\r\n\t\t\treturn self.dirtyValidators.length === 0;\r\n\t\t};\r\n\r\n\t\tthis.before = function(event){\r\n\t\t\tif(self.config.before !== null){\r\n\t\t\t\tvar callBack = luga.lookupFunction(self.config.before);\r\n\t\t\t\tif(callBack !== undefined){\r\n\t\t\t\t\tcallBack.apply(null, [self.config.formNode, event]);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthrow(luga.string.format(luga.validator.CONST.MESSAGES.MISSING_FUNCTION, [self.config.before]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.error = function(){\r\n\t\t\tvar callBack = luga.lookupFunction(self.config.error);\r\n\t\t\tif(callBack !== undefined){\r\n\t\t\t\tcallBack.apply(null, [self.config.formNode, self.dirtyValidators]);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthrow(luga.string.format(luga.validator.CONST.MESSAGES.MISSING_FUNCTION, [self.config.error]));\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.after = function(event){\r\n\t\t\tif(self.config.after !== null){\r\n\t\t\t\tvar callBack = luga.lookupFunction(self.config.after);\r\n\t\t\t\tif(callBack !== undefined){\r\n\t\t\t\t\tcallBack.apply(null, [self.config.formNode, event]);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tthrow(luga.string.format(luga.validator.CONST.MESSAGES.MISSING_FUNCTION, [self.config.after]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tluga.namespace(\"luga.validator.fieldValidatorFactory\");\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.fieldValidatorFactory.getInstance.options\r\n\t *\r\n\t * @property {jquery|undefined} formNode    Either a jQuery object wrapping the form or the naked DOM object\r\n\t *                                          Required in case of radio and checkboxes (that are validated as group), optional in all other cases\r\n\r\n\t * @property {jQuery} fieldNode   Either a jQuery object wrapping the field or the naked DOM object. Required\r\n\t *\r\n\t * Additional options can be used, but are specific to different kind of input fields.\r\n\t * Check their implementation for details\r\n\t */\r\n\r\n\t/**\r\n\t * Field validator factory. Use this to instantiate a field validator without worrying about the specific implementation\r\n\t *\r\n\t * @param {luga.validator.fieldValidatorFactory.getInstance.options} options\r\n\t * @return {luga.validator.BaseFieldValidator|luga.validator.BaseGroupValidator}\r\n\t */\r\n\tluga.validator.fieldValidatorFactory.getInstance = function(options){\r\n\t\t/** @type {luga.validator.fieldValidatorFactory.getInstance.options} */\r\n\t\tthis.config = {};\r\n\t\tluga.merge(this.config, options);\r\n\t\tvar self = this;\r\n\t\t// Abort if the field isn't suitable to validation\r\n\t\tif(luga.form.utils.isInputField(self.config.fieldNode) === false){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar fieldType = jQuery(self.config.fieldNode).prop(\"type\");\r\n\t\t// Get relevant validator based on field type\r\n\t\tswitch(fieldType){\r\n\r\n\t\t\tcase \"select-multiple\":\r\n\t\t\t\treturn new luga.validator.SelectValidator(this.config);\r\n\r\n\t\t\tcase \"select-one\":\r\n\t\t\t\treturn new luga.validator.SelectValidator(this.config);\r\n\r\n\t\t\tcase \"radio\":\r\n\t\t\t\tif(jQuery(this.config.fieldNode).attr(\"name\") !== undefined){\r\n\t\t\t\t\treturn new luga.validator.RadioValidator({\r\n\t\t\t\t\t\tinputGroup: luga.form.utils.getFieldGroup(jQuery(this.config.fieldNode).attr(\"name\"), this.config.formNode)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"checkbox\":\r\n\t\t\t\tif(jQuery(this.config.fieldNode).attr(\"name\") !== undefined){\r\n\t\t\t\t\treturn new luga.validator.CheckboxValidator({\r\n\t\t\t\t\t\tinputGroup: luga.form.utils.getFieldGroup(jQuery(this.config.fieldNode).attr(\"name\"), this.config.formNode)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn new luga.validator.TextValidator(this.config);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.BaseFieldValidator.options\r\n\t *\r\n\t * @property {jQuery} fieldNode      Either a jQuery object wrapping the field or the naked DOM object. Required\r\n\t * @property {String} message        Error message. Can also be set using the \"data-lugavalidator-message\" attribute. Optional\r\n\t * @property {String} errorclass     CSS class to apply for invalid state. Can also be set using the \"data-lugavalidator-errorclass\" attribute. Optional\r\n\t *\r\n\t * Additional options can be used, but are specific to different kind of input fields.\r\n\t * Check their implementation for details\r\n\t */\r\n\r\n\t/**\r\n\t * Abstract field validator class. To be extended for different kind of fields\r\n\t *\r\n\t * @constructor\r\n\t * @abstract\r\n\t * @param {luga.validator.BaseFieldValidator.options} options\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.BaseFieldValidator = function(options){\r\n\r\n\t\tif(this.constructor === luga.validator.BaseFieldValidator){\r\n\t\t\tthrow(luga.validator.CONST.MESSAGES.BASE_VALIDATOR_ABSTRACT);\r\n\t\t}\r\n\r\n\t\t/** @type {luga.validator.BaseFieldValidator.options} */\r\n\t\tthis.config = {\r\n\t\t\tmessage: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MESSAGE) || \"\",\r\n\t\t\terrorclass: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.ERROR_CLASS) || \"\"\r\n\t\t};\r\n\t\tluga.merge(this.config, options);\r\n\r\n\t\tthis.node = jQuery(options.fieldNode);\r\n\t\tthis.message = this.config.message;\r\n\t\tthis.name = \"\";\r\n\r\n\t\tif(this.node.attr(\"name\") !== undefined){\r\n\t\t\tthis.name = this.node.attr(\"name\");\r\n\t\t}\r\n\t\telse if(this.node.attr(\"id\") !== undefined){\r\n\t\t\tthis.name = this.node.attr(\"id\");\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Return true if the field is valid. False otherwise\r\n\t\t * @abstract\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\t/* istanbul ignore next */\r\n\t\tthis.isValid = function(){\r\n\t\t};\r\n\r\n\t\tthis.flagInvalid = function(){\r\n\t\t\tthis.node.addClass(this.config.errorclass);\r\n\t\t\t// Set the title attribute in order to show a tooltip\r\n\t\t\tthis.node.attr(\"title\", this.message);\r\n\t\t};\r\n\r\n\t\tthis.flagValid = function(){\r\n\t\t\tthis.node.removeClass(this.config.errorclass);\r\n\t\t\tthis.node.removeAttr(\"title\");\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Be careful, this method returns a boolean but also has side-effects\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.validate = function(){\r\n\t\t\t// Disabled fields are always valid\r\n\t\t\tif(this.node.prop(\"disabled\") === true){\r\n\t\t\t\tthis.flagValid();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(this.isValid() === false){\r\n\t\t\t\tthis.flagInvalid();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.flagValid();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.TextValidator.options\r\n\t *\r\n\t * @property {jQuery} fieldNode               Either a jQuery object wrapping the field or the naked DOM object. Required\r\n\t * @property {boolean|function} required      Set it to true to flag the field as required.\r\n\t *                                            In case you need conditional validation, set it to the name of a custom function that will handle the condition.\r\n\t *                                            Can also be set using the \"data-lugavalidator-required\" attribute. Optional\r\n\t * @property {String} pattern                 Validation pattern to be applied, either built-in or custom.\r\n\t *                                            Can also be set using the \"data-lugavalidator-pattern\" attribute. Optional\r\n\t * @property {String} minlength               Enforce a minimum text length. Can also be set using the \"data-lugavalidator-minlength\" attribute. Optional\r\n\t * @property {String} maxlength               Enforce a maximum text length. Can also be set using the \"data-lugavalidator-maxlength\" attribute. Optional\r\n\t * @property {String} minnumber               Enforce a minimum numeric value. Can also be set using the \"data-lugavalidator-minnumber\" attribute. Optional\r\n\t * @property {String} maxnumber               Enforce a maximum numeric value. Can also be set using the \"data-lugavalidator-maxnumber\" attribute. Optional\r\n\t * @property {String} datepattern             Date format pattern to be applied, either built-in or custom. Can also be set using the \"data-lugavalidator-datepattern\" attribute. Optional\r\n\t * @property {String} mindate                 Enforce a minimum date. Can also be set using the \"data-lugavalidator-mindate\" attribute. Optional\r\n\t * @property {String} maxdate                 Enforce a maximum date. Can also be set using the \"data-lugavalidator-maxdate\" attribute. Optional\r\n\t * @property {String} equalto                 Id of another field who's values will be compared for equality. Can also be set using the \"data-lugavalidator-equalto\" attribute. Optional\r\n\t * @property {String} message                 Error message. Can also be set using the \"data-lugavalidator-message\" attribute. Optional\r\n\t * @property {String} errorclass              CSS class to apply for invalid state. Can also be set using the \"data-lugavalidator-errorclass\" attribute. Optional\r\n\t */\r\n\r\n\t/**\r\n\t * Text field validator class\r\n\t *\r\n\t * @constructor\r\n\t * @extend luga.validator.BaseFieldValidator\r\n\t * @param {luga.validator.TextValidator.options} options\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.TextValidator = function(options){\r\n\r\n\t\t/** @type {luga.validator.TextValidator.options} */\r\n\t\tthis.config = {\r\n\t\t\trequired: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.REQUIRED),\r\n\t\t\tpattern: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.PATTERN),\r\n\t\t\tminlength: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MIN_LENGTH),\r\n\t\t\tmaxlength: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MAX_LENGTH),\r\n\t\t\tminnumber: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MIN_NUMBER),\r\n\t\t\tmaxnumber: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MAX_NUMBER),\r\n\t\t\tdatepattern: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.DATE_PATTERN) || luga.validator.CONST.DEFAULT_DATE_PATTERN,\r\n\t\t\tmindate: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MIN_DATE),\r\n\t\t\tmaxdate: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MAX_DATE),\r\n\t\t\tequalto: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.EQUAL_TO)\r\n\t\t};\r\n\r\n\t\tluga.merge(this.config, options);\r\n\t\tluga.extend(luga.validator.BaseFieldValidator, this, [this.config]);\r\n\r\n\t\tif(this.config.required !== undefined){\r\n\t\t\ttry{\r\n\t\t\t\t// Hack to ensure it's a boolean\r\n\t\t\t\tthis.config.required = JSON.parse(this.config.required);\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t\t// Unable to convert into a booolean. It must be a string referencing a function\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/** @type {luga.validator.TextValidator} */\r\n\t\tvar self = this;\r\n\r\n\t\tself.node = jQuery(options.fieldNode);\r\n\t\tif(self.node.length === 0){\r\n\t\t\tthrow(luga.validator.CONST.MESSAGES.MISSING_FIELD);\r\n\t\t}\r\n\t\tself.type = \"text\";\r\n\r\n\t\t// Put focus and cursor inside the field\r\n\t\tthis.getFocus = function(){\r\n\t\t\t// This try block is required to solve an obscure issue with IE and hidden fields\r\n\t\t\ttry{\r\n\t\t\t\tself.node.focus();\r\n\t\t\t\tself.node.select();\r\n\t\t\t}\r\n\t\t\tcatch(e){\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isEmpty = function(){\r\n\t\t\treturn self.node.val() === \"\";\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isRequired = function(){\r\n\t\t\tvar requiredAtt = this.config.required;\r\n\t\t\tif(requiredAtt === true){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(requiredAtt === false){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// It's a conditional validation. Invoke the relevant function if available\r\n\t\t\tvar functionReference = luga.lookupFunction(requiredAtt);\r\n\t\t\tif(functionReference !== undefined){\r\n\t\t\t\treturn functionReference.apply(null, [self.node]);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthrow(luga.string.format(luga.validator.CONST.MESSAGES.MISSING_FUNCTION, [requiredAtt]));\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Returns true if the field satisfy the rules associated with it. False otherwise\r\n\t\t * Be careful, this method contains multiple exit points!!!\r\n\t\t * @override\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isValid = function(){\r\n\t\t\tif(self.isEmpty()){\r\n\t\t\t\tif(self.isRequired() === true){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t// It's empty. Loop over all the available rules\r\n\t\t\t\tfor(var rule in luga.validator.rules){\r\n\t\t\t\t\t// Check if the current rule is required for the field\r\n\t\t\t\t\tif(self.node.attr(luga.validator.CONST.RULE_PREFIX + rule) !== undefined){\r\n\t\t\t\t\t\t// Invoke the rule\r\n\t\t\t\t\t\tif(luga.validator.rules[rule].apply(null, [self.node, self]) === false){\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.SelectValidator.options\r\n\t *\r\n\t * @property {jQuery} fieldNode              Either a jQuery object wrapping the field or the naked DOM object. Required\r\n\t * @property {String|number} invalidindex    Prevents selection of an entry on a given position (zero based). Can also be set using the \"data-lugavalidator-invalidindex\" attribute. Optional\r\n\t * @property {String} invalidvalue           Prevents selection of an entry with a given value. Can also be set using the \"data-lugavalidator-invalidvalue\" attribute. Optional\r\n\t * @property {String} message                Error message. Can also be set using the \"data-lugavalidator-message\" attribute. Optional\r\n\t * @property {String} errorclass             CSS class to apply for invalid state. Can also be set using the \"data-lugavalidator-errorclass\" attribute. Optional\r\n\t */\r\n\r\n\t/**\r\n\t * Select field validator class\r\n\t *\r\n\t * @constructor\r\n\t * @extend luga.validator.BaseFieldValidator\r\n\t * @param {luga.validator.SelectValidator.options} options\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.SelectValidator = function(options){\r\n\r\n\t\t/** @type {luga.validator.SelectValidator.options} */\r\n\t\tthis.config = {\r\n\t\t\tinvalidindex: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.INVALID_INDEX),\r\n\t\t\tinvalidvalue: jQuery(options.fieldNode).attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.INVALID_VALUE)\r\n\t\t};\r\n\r\n\t\tluga.merge(this.config, options);\r\n\t\tluga.extend(luga.validator.BaseFieldValidator, this, [this.config]);\r\n\r\n\t\t/** @type {luga.validator.SelectValidator} */\r\n\t\tvar self = this;\r\n\t\tself.type = \"select\";\r\n\t\tself.node = jQuery(options.fieldNode);\r\n\t\tif(self.node.length === 0){\r\n\t\t\tthrow(luga.validator.CONST.MESSAGES.MISSING_FIELD);\r\n\t\t}\r\n\r\n\t\t// Ensure invalidindex is numeric\r\n\t\tif((self.config.invalidindex !== undefined) && (!jQuery.isNumeric(self.config.invalidindex))){\r\n\t\t\tthrow(luga.validator.CONST.MESSAGES.INVALID_INDEX_PARAMETER);\r\n\t\t}\r\n\r\n\t\t// Whenever a \"size\" attribute is available, the browser reports -1 as selectedIndex\r\n\t\t// Fix this weirdness\r\n\t\tvar currentIndex = self.node.prop(\"selectedIndex\");\r\n\t\tif(currentIndex === -1){\r\n\t\t\tcurrentIndex = 0;\r\n\t\t}\r\n\t\tcurrentIndex = parseInt(currentIndex, 10);\r\n\r\n\t\t/**\r\n\t\t * Returns true if the field satisfy the rules associated with it. False otherwise\r\n\t\t * Be careful, this method contains multiple exit points!!!\r\n\t\t * @override\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isValid = function(){\r\n\t\t\t// Check for index\r\n\t\t\tif(currentIndex === parseInt(self.config.invalidindex, 10)){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// Check for value\r\n\t\t\tif(self.node.val() === self.config.invalidvalue){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// No need to care about other rules\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.BaseGroupValidator.options\r\n\t *\r\n\t * @property {jQuery} inputGroup      A jQuery object wrapping input fields that share the same name. Use luga.form.utils.getFieldGroup() to obtain it. Required\r\n\t * @property {String} message         Error message. Can also be set using the \"data-lugavalidator-message\" attribute. Optional\r\n\t * @property {String} errorclass      CSS class to apply for invalid state. Can also be set using the \"data-lugavalidator-errorclass\" attribute. Optional\r\n\t *\r\n\t * Additional options can be used, but are specific to different kind of input fields.\r\n\t * Check their implementation for details\r\n\t */\r\n\r\n\t/**\r\n\t * Abstract validator class for grouped fields (checkboxes, radio buttons). To be extended for different kind of fields\r\n\t *\r\n\t * @constructor\r\n\t * @abstract\r\n\t * @param {luga.validator.BaseFieldValidator.options} options\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.BaseGroupValidator = function(options){\r\n\r\n\t\tif(this.constructor === luga.validator.BaseGroupValidator){\r\n\t\t\tthrow(luga.validator.CONST.MESSAGES.GROUP_VALIDATOR_ABSTRACT);\r\n\t\t}\r\n\t\t/** @type {luga.validator.BaseFieldValidator.options} */\r\n\t\tthis.config = {};\r\n\t\tluga.merge(this.config, options);\r\n\t\tthis.inputGroup = this.config.inputGroup;\r\n\t\tthis.name = jQuery(this.config.inputGroup).attr(\"name\");\r\n\t\tthis.message = \"\";\r\n\t\tthis.errorclass = \"\";\r\n\r\n\t\t// Since fields from the same group can have conflicting attribute values, the last one win\r\n\t\tfor(var i = 0; i < this.inputGroup.length; i++){\r\n\t\t\tvar field = jQuery(this.inputGroup[i]);\r\n\t\t\tif(field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MESSAGE) !== undefined){\r\n\t\t\t\tthis.message = field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MESSAGE);\r\n\t\t\t}\r\n\t\t\tif(field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.ERROR_CLASS) !== undefined){\r\n\t\t\t\tthis.errorclass = field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.ERROR_CLASS);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns true if the field group is valid. False otherwise\r\n\t\t * @abstract\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\t/* istanbul ignore next */\r\n\t\tthis.isValid = function(){\r\n\t\t};\r\n\r\n\t\tthis.flagInvalid = function(){\r\n\t\t\t/* istanbul ignore else */\r\n\t\t\tif(this.errorclass !== \"\"){\r\n\t\t\t\tfor(var i = 0; i < this.inputGroup.length; i++){\r\n\t\t\t\t\tvar field = jQuery(this.inputGroup[i]);\r\n\t\t\t\t\tfield.addClass(this.errorclass);\r\n\t\t\t\t\tfield.attr(\"title\", this.message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.flagValid = function(){\r\n\t\t\tif(this.errorclass !== \"\"){\r\n\t\t\t\tfor(var i = 0; i < this.inputGroup.length; i++){\r\n\t\t\t\t\tvar field = jQuery(this.inputGroup[i]);\r\n\t\t\t\t\tfield.removeClass(this.errorclass);\r\n\t\t\t\t\tfield.removeAttr(\"title\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Be careful, this method returns a boolean but also has side-effects\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.validate = function(){\r\n\t\t\tif(this.isValid() === true){\r\n\t\t\t\tthis.flagValid();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.flagInvalid();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.RadioValidator.options\r\n\t *\r\n\t * @property {jQuery} inputGroup      A jQuery object wrapping input fields that share the same name. Use luga.form.utils.getFieldGroup() to obtain it. Required\r\n\t * @property {String} message         Error message. Can also be set using the \"data-lugavalidator-message\" attribute. Optional\r\n\t * @property {String} errorclass      CSS class to apply for invalid state. Can also be set using the \"data-lugavalidator-errorclass\" attribute. Optional\r\n\t */\r\n\r\n\t/**\r\n\t * Radio button group validator class\r\n\t *\r\n\t * @constructor\r\n\t * @extend luga.validator.BaseGroupValidator\r\n\t * @param {luga.validator.RadioValidator.options} options\r\n\t *\r\n\t */\r\n\tluga.validator.RadioValidator = function(options){\r\n\t\t/** @type {luga.validator.RadioValidator.options} */\r\n\t\tthis.config = {};\r\n\t\tluga.merge(this.config, options);\r\n\t\tluga.extend(luga.validator.BaseGroupValidator, this, [this.config]);\r\n\t\tthis.type = \"radio\";\r\n\r\n\t\t/**\r\n\t\t * Return true if the field group is required\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isRequired = function(){\r\n\t\t\tvar requiredFlag = false;\r\n\t\t\tvar fieldGroup = this.inputGroup;\r\n\t\t\t// Since fields from the same group can have conflicting attribute values, the last one win\r\n\t\t\tfor(var i = 0; i < fieldGroup.length; i++){\r\n\t\t\t\tvar field = jQuery(fieldGroup[i]);\r\n\t\t\t\tif(field.prop(\"disabled\") === false){\r\n\t\t\t\t\tif(field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.REQUIRED)){\r\n\t\t\t\t\t\trequiredFlag = field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.REQUIRED);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn requiredFlag;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Returns true if the field satisfy the rules associated with it. False otherwise\r\n\t\t * Be careful, this method contains multiple exit points!!!\r\n\t\t * @override\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isValid = function(){\r\n\t\t\tif(this.isRequired() === \"true\"){\r\n\t\t\t\tvar fieldGroup = this.inputGroup;\r\n\t\t\t\tfor(var i = 0; i < fieldGroup.length; i++){\r\n\t\t\t\t\tvar field = jQuery(fieldGroup[i]);\r\n\t\t\t\t\t// As long as only one is checked, we are fine\r\n\t\t\t\t\tif(field.prop(\"checked\") === true){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.CheckboxValidator.options\r\n\t *\r\n\t * @property {jQuery} inputGroup      A jQuery object wrapping input fields that share the same name. Use luga.form.utils.getFieldGroup() to obtain it. Required\r\n\t * @property {Number} minchecked      Specify a minimum number of boxes that can be checked in a group. Set it to 1 to allow only one choice. Optional\r\n\t * @property {Number} maxchecked      Specify a maximum number of boxes that can be checked within a group. Optional\r\n\t * @property {String} message         Error message. Can also be set using the \"data-lugavalidator-message\" attribute. Optional\r\n\t * @property {String} errorclass      CSS class to apply for invalid state. Can also be set using the \"data-lugavalidator-errorclass\" attribute. Optional\r\n\t */\r\n\r\n\t/**\r\n\t * Checkboxes group validator class\r\n\t *\r\n\t * @constructor\r\n\t * @extend luga.validator.BaseGroupValidator\r\n\t * @param {luga.validator.CheckboxValidator.options} options\r\n\t *\r\n\t */\r\n\tluga.validator.CheckboxValidator = function(options){\r\n\t\t/** @type {luga.validator.CheckboxValidator.options} */\r\n\t\tthis.config = {};\r\n\t\tluga.merge(this.config, options);\r\n\t\tluga.extend(luga.validator.BaseGroupValidator, this, [this.config]);\r\n\t\tthis.type = \"checkbox\";\r\n\t\tthis.minchecked = 0;\r\n\t\tthis.maxchecked = this.config.inputGroup.length;\r\n\r\n\t\t// Since checkboxes from the same group can have conflicting attribute values, the last one win\r\n\t\tfor(var i = 0; i < this.inputGroup.length; i++){\r\n\t\t\tvar field = jQuery(this.inputGroup[i]);\r\n\t\t\tif(field.prop(\"disabled\") === false){\r\n\t\t\t\tif(field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MIN_CHECKED) !== undefined){\r\n\t\t\t\t\tthis.minchecked = field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MIN_CHECKED);\r\n\t\t\t\t}\r\n\t\t\t\tif(field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MAX_CHECKED) !== undefined){\r\n\t\t\t\t\tthis.maxchecked = field.attr(luga.validator.CONST.CUSTOM_ATTRIBUTES.MAX_CHECKED);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns true if the field satisfy the rules associated with it. False otherwise\r\n\t\t * @override\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tthis.isValid = function(){\r\n\t\t\tvar checkCounter = 0;\r\n\t\t\tvar fieldGroup = this.inputGroup;\r\n\t\t\tfor(var i = 0; i < fieldGroup.length; i++){\r\n\t\t\t\t// For each checked box, increase the counter\r\n\t\t\t\tvar field = jQuery(this.inputGroup[i]);\r\n\t\t\t\tif(field.prop(\"disabled\") === false){\r\n\t\t\t\t\tif(field.prop(\"checked\") === true){\r\n\t\t\t\t\t\tcheckCounter++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn ((checkCounter >= this.minchecked) && (checkCounter <= this.maxchecked));\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t/* Rules */\r\n\r\n\tluga.namespace(\"luga.validator.rules\");\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.email = function(fieldNode, validator){\r\n\t\tvar fieldValue = fieldNode.val();\r\n\t\tvar containsAt = (fieldValue.indexOf(\"@\") !== -1);\r\n\t\tvar containDot = (fieldValue.indexOf(\".\") !== -1);\r\n\t\tif((containsAt === true) && (containDot === true)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.rules.equalto = function(fieldNode, validator){\r\n\t\tvar secondFieldNode = jQuery(\"#\" + validator.config.equalto);\r\n\t\tif(secondFieldNode.length === 0){\r\n\t\t\tthrow(luga.string.format(luga.validator.CONST.MESSAGES.MISSING_EQUAL_TO_FIELD, [validator.config.equalto]));\r\n\t\t}\r\n\t\treturn (fieldNode.val() === secondFieldNode.val());\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.datepattern = function(fieldNode, validator){\r\n\t\tvar datObj = luga.validator.dateStrToObj(fieldNode.val(), validator.config.datepattern);\r\n\t\tif(datObj !== null){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.maxdate = function(fieldNode, validator){\r\n\t\tvar pattern = validator.config.datepattern;\r\n\t\tvar valueDate = luga.validator.dateStrToObj(fieldNode.val(), pattern);\r\n\t\tvar maxDate = luga.validator.dateStrToObj(validator.config.maxdate, pattern);\r\n\t\tif((valueDate !== null) && (maxDate !== null)){\r\n\t\t\treturn valueDate <= maxDate;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.mindate = function(fieldNode, validator){\r\n\t\tvar pattern = validator.config.datepattern;\r\n\t\tvar valueDate = luga.validator.dateStrToObj(fieldNode.val(), pattern);\r\n\t\tvar minDate = luga.validator.dateStrToObj(validator.config.mindate, pattern);\r\n\t\tif((valueDate !== null) && (minDate !== null)){\r\n\t\t\treturn valueDate >= minDate;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.maxlength = function(fieldNode, validator){\r\n\t\tif(fieldNode.val().length > validator.config.maxlength){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.minlength = function(fieldNode, validator){\r\n\t\tif(fieldNode.val().length < validator.config.minlength){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.maxnumber = function(fieldNode, validator){\r\n\t\tif(jQuery.isNumeric(fieldNode.val()) === false){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(parseFloat(fieldNode.val()) <= parseFloat(validator.config.maxnumber)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.rules.minnumber = function(fieldNode, validator){\r\n\t\tif(jQuery.isNumeric(fieldNode.val()) === false){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(parseFloat(fieldNode.val()) >= parseFloat(validator.config.minnumber)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @param {jQuery} fieldNode\r\n\t * @param {luga.validator.FormValidator} validator\r\n\t * @return {Boolean}\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.rules.pattern = function(fieldNode, validator){\r\n\t\tvar regExpObj = luga.validator.patterns[validator.config.pattern];\r\n\t\tif(regExpObj !== undefined){\r\n\t\t\treturn regExpObj.test(fieldNode.val());\r\n\t\t}\r\n\t\telse{\r\n\t\t\t// The pattern is missing\r\n\t\t\tthrow(luga.string.format(luga.validator.CONST.MESSAGES.PATTERN_NOT_FOUND, [validator.config.pattern]));\r\n\t\t}\r\n\t};\r\n\r\n\t/* Patterns */\r\n\r\n\tluga.namespace(\"luga.validator.patterns\");\r\n\r\n\tluga.validator.patterns.lettersonly = new RegExp(\"^[a-zA-Z]*$\");\r\n\tluga.validator.patterns.alphanumeric = new RegExp(\"^\\\\w*$\");\r\n\tluga.validator.patterns.integer = new RegExp(\"^-?[1-9][0-9]*$\");\r\n\tluga.validator.patterns.positiveinteger = new RegExp(\"^\\\\d\\\\d*$\");\r\n\tluga.validator.patterns.number = new RegExp(\"^-?(\\\\d\\\\d*\\\\.\\\\d*$)|(^-?\\\\d\\\\d*$)|(^-?\\\\.\\\\d\\\\d*$)\");\r\n\tluga.validator.patterns.filepath_pdf = new RegExp(\"[\\\\w_]*\\\\.([pP][dD][fF])$\");\r\n\tluga.validator.patterns.filepath_jpg = new RegExp(\"[\\\\w_]*\\\\.([jJ][pP][eE]?[gG])$\");\r\n\tluga.validator.patterns.filepath_zip = new RegExp(\"[\\\\w_]*\\\\.([zZ][iI][pP])$\");\r\n\tluga.validator.patterns.filepath = new RegExp(\"[\\\\w_]*\\\\.\\\\w{3}$\");\r\n\tluga.validator.patterns.time = new RegExp(\"([0-1][0-9]|2[0-3]):[0-5][0-9]$\");\r\n\r\n\t/* Date specifications */\r\n\r\n\tluga.namespace(\"luga.validator.dateSpecs\");\r\n\r\n\t/**\r\n\t * Create an object that stores date validation's info\r\n\t *\r\n\t * @param {regexp} rex\r\n\t * @param {Number} year\r\n\t * @param {Number} month\r\n\t * @param {Number} day\r\n\t * @param {String} separator\r\n\t *\r\n\t * @return {Object}\r\n\t */\r\n\tluga.validator.createDateSpecObj = function(rex, year, month, day, separator){\r\n\t\tvar infoObj = {};\r\n\t\tinfoObj.rex = new RegExp(rex);\r\n\t\tinfoObj.y = year;\r\n\t\tinfoObj.m = month;\r\n\t\tinfoObj.d = day;\r\n\t\tinfoObj.s = separator;\r\n\t\treturn infoObj;\r\n\t};\r\n\r\n\t/**\r\n\t * Create a Date object out of a string, based on a given date spec key\r\n\t *\r\n\t * @param {String}   dateStr\r\n\t * @param {String}   dateSpecKey\r\n\t * @return {date|*}\r\n\t */\r\n\tluga.validator.dateStrToObj = function(dateStr, dateSpecKey){\r\n\t\tvar dateSpecObj = luga.validator.dateSpecs[dateSpecKey];\r\n\t\tif(dateSpecObj !== undefined){\r\n\r\n\t\t\t// If it doesn't matches the RegExp, abort\r\n\t\t\tif(!dateSpecObj.rex.test(dateStr)){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\t// String's value matches the pattern, check if it's a valida date\r\n\t\t\t// Split the date into 3 different bits using the separator\r\n\t\t\tvar dateBits = dateStr.split(dateSpecObj.s);\r\n\t\t\t// First try to create a new date out of the bits\r\n\t\t\tvar testDate = new Date(dateBits[dateSpecObj.y], (dateBits[dateSpecObj.m] - 1), dateBits[dateSpecObj.d]);\r\n\t\t\t// Make sure values match after conversion\r\n\t\t\tvar yearMatches = (testDate.getFullYear() === parseInt(dateBits[dateSpecObj.y], 10));\r\n\t\t\tvar monthMatches = (testDate.getMonth() === parseInt(dateBits[dateSpecObj.m] - 1, 10));\r\n\t\t\tvar dayMatches = (testDate.getDate() === parseInt(dateBits[dateSpecObj.d], 10));\r\n\t\t\tif((yearMatches === true) && (monthMatches === true) && (dayMatches === true)){\r\n\t\t\t\treturn testDate;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tluga.validator.dateSpecs[\"YYYY-MM-DD\"] = luga.validator.createDateSpecObj(\"^([0-9]{4})-([0-1][0-9])-([0-3][0-9])$\", 0, 1, 2, \"-\");\r\n\tluga.validator.dateSpecs[\"YYYY-M-D\"] = luga.validator.createDateSpecObj(\"^([0-9]{4})-([0-1]?[0-9])-([0-3]?[0-9])$\", 0, 1, 2, \"-\");\r\n\tluga.validator.dateSpecs[\"MM.DD.YYYY\"] = luga.validator.createDateSpecObj(\"^([0-1][0-9]).([0-3][0-9]).([0-9]{4})$\", 2, 0, 1, \".\");\r\n\tluga.validator.dateSpecs[\"M.D.YYYY\"] = luga.validator.createDateSpecObj(\"^([0-1]?[0-9]).([0-3]?[0-9]).([0-9]{4})$\", 2, 0, 1, \".\");\r\n\tluga.validator.dateSpecs[\"MM/DD/YYYY\"] = luga.validator.createDateSpecObj(\"^([0-1][0-9])/([0-3][0-9])/([0-9]{4})$\", 2, 0, 1, \"/\");\r\n\tluga.validator.dateSpecs[\"M/D/YYYY\"] = luga.validator.createDateSpecObj(\"^([0-1]?[0-9])/([0-3]?[0-9])/([0-9]{4})$\", 2, 0, 1, \"/\");\r\n\tluga.validator.dateSpecs[\"MM-DD-YYYY\"] = luga.validator.createDateSpecObj(\"^([0-21][0-9])-([0-3][0-9])-([0-9]{4})$\", 2, 0, 1, \"-\");\r\n\tluga.validator.dateSpecs[\"M-D-YYYY\"] = luga.validator.createDateSpecObj(\"^([0-1]?[0-9])-([0-3]?[0-9])-([0-9]{4})$\", 2, 0, 1, \"-\");\r\n\tluga.validator.dateSpecs[\"DD.MM.YYYY\"] = luga.validator.createDateSpecObj(\"^([0-3][0-9]).([0-1][0-9]).([0-9]{4})$\", 2, 1, 0, \".\");\r\n\tluga.validator.dateSpecs[\"D.M.YYYY\"] = luga.validator.createDateSpecObj(\"^([0-3]?[0-9]).([0-1]?[0-9]).([0-9]{4})$\", 2, 1, 0, \".\");\r\n\tluga.validator.dateSpecs[\"DD/MM/YYYY\"] = luga.validator.createDateSpecObj(\"^([0-3][0-9])/([0-1][0-9])/([0-9]{4})$\", 2, 1, 0, \"/\");\r\n\tluga.validator.dateSpecs[\"D/M/YYYY\"] = luga.validator.createDateSpecObj(\"^([0-3]?[0-9])/([0-1]?[0-9])/([0-9]{4})$\", 2, 1, 0, \"/\");\r\n\tluga.validator.dateSpecs[\"DD-MM-YYYY\"] = luga.validator.createDateSpecObj(\"^([0-3][0-9])-([0-1][0-9])-([0-9]{4})$\", 2, 1, 0, \"-\");\r\n\tluga.validator.dateSpecs[\"D-M-YYYY\"] = luga.validator.createDateSpecObj(\"^([0-3]?[0-9])-([0-1]?[0-9])-([0-9]{4})$\", 2, 1, 0, \"-\");\r\n\r\n\t/**\r\n\t * Attach form validators to any suitable form inside the given DOM node\r\n\t * @param {HTMLElement} [rootNode]  Optional, default to document.body\r\n\t */\r\n\tluga.validator.initForms = function(rootNode){\r\n\t\tif(rootNode === undefined){\r\n\t\t\trootNode = document.body;\r\n\t\t}\r\n\t\tvar nodes = rootNode.querySelectorAll(luga.validator.CONST.FORM_SELECTOR);\r\n\t\tfor(var i = 0; i < nodes.length; i++){\r\n\t\t\tvar element = nodes[i];\r\n\t\t\tif(element.getAttribute(luga.validator.CONST.CUSTOM_ATTRIBUTES.VALIDATE) === \"true\"){\r\n\t\t\t\telement.addEventListener(\"submit\", function(event){\r\n\t\t\t\t\tvar formValidator = new luga.validator.FormValidator({\r\n\t\t\t\t\t\tformNode: element\r\n\t\t\t\t\t});\r\n\t\t\t\t\tformValidator.validate(event);\r\n\t\t\t\t}, false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/* API */\r\n\r\n\tluga.namespace(\"luga.validator.api\");\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.api.validateForm.options\r\n\t *\r\n\t * @property {jQuery} formNode       Either a jQuery object wrapping the form or the naked DOM object. Required\r\n\t * @property {function} error        Name of the function to be invoked to handle/display validation messages.\r\n\t *                                   Default to luga.validator.errorAlert\r\n\t */\r\n\r\n\t/**\r\n\t * Programmatically validate a form\r\n\t * @param {luga.validator.api.validateForm.options} options\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.api.validateForm = function(options){\r\n\t\tvar formValidator = new luga.validator.FormValidator(options);\r\n\t\tformValidator.validate();\r\n\t\treturn formValidator.isValid();\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.api.validateField.options\r\n\t *\r\n\t * @property {jQuery} fieldNode      Either a jQuery object wrapping the field or the naked DOM object. Required\r\n\t * @property {function} error        Function to be invoked to handle/display validation messages.\r\n\t *                                   Default to luga.validator.errorAlert\r\n\t */\r\n\r\n\t/**\r\n\t * Programmatically validate a field\r\n\t * @param {luga.validator.api.validateField.options} options\r\n\t * @return {Boolean}\r\n\t * @throw {Exception}\r\n\t */\r\n\tluga.validator.api.validateField = function(options){\r\n\t\tif(luga.form.utils.isInputField(options.fieldNode) === false){\r\n\t\t\tthrow(luga.validator.CONST.MESSAGES.FIELD_CANT_BE_VALIDATED);\r\n\t\t}\r\n\t\t/* istanbul ignore else */\r\n\t\tif(options.error === undefined){\r\n\t\t\toptions.error = luga.validator.CONST.HANDLERS.FORM_ERROR;\r\n\t\t}\r\n\t\tvar dirtyValidators = [];\r\n\t\tvar fieldValidator = luga.validator.fieldValidatorFactory.getInstance(options);\r\n\t\tfieldValidator.validate(null);\r\n\t\tif(fieldValidator.isValid() !== true){\r\n\t\t\tvar callBack = luga.lookupFunction(options.error);\r\n\t\t\tdirtyValidators.push(fieldValidator);\r\n\t\t\tcallBack(options.fieldNode, dirtyValidators);\r\n\t\t}\r\n\t\treturn fieldValidator.isValid();\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.api.validateField.options\r\n\t *\r\n\t * @property {jQuery} fields      A jQuery object wrapping the collection of fields. Required\r\n\t * @property {function} error     Function to be invoked to handle/display validation messages.\r\n\t *                                Default to luga.validator.errorAlert\r\n\t */\r\n\r\n\t/**\r\n\t * Programmatically validate a collection of fields\r\n\t * @param {luga.validator.api.validateFields.options} options\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.api.validateFields = function(options){\r\n\t\t/* istanbul ignore else */\r\n\t\tif(!options.error){\r\n\t\t\toptions.error = luga.validator.CONST.HANDLERS.FORM_ERROR;\r\n\t\t}\r\n\t\tvar validators = [];\r\n\t\tvar executedValidators = {};\r\n\t\tvar dirtyValidators = [];\r\n\r\n\t\tfor(var i = 0; i < options.fields.length; i++){\r\n\t\t\t/* istanbul ignore else */\r\n\t\t\tif(luga.form.utils.isInputField(options.fields[i]) === true){\r\n\t\t\t\tvalidators.push(luga.validator.fieldValidatorFactory.getInstance({\r\n\t\t\t\t\tfieldNode: options.fields[i]\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var j = 0; j < validators.length; j++){\r\n\t\t\t/* istanbul ignore else */\r\n\t\t\tif(validators[j] && validators[j].validate){\r\n\t\t\t\tif(executedValidators[validators[j].name] !== undefined){\r\n\t\t\t\t\t// Already validated checkbox or radio, skip it\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(validators[j].validate() === true){\r\n\t\t\t\t\tdirtyValidators.push(validators[j]);\r\n\t\t\t\t}\r\n\t\t\t\texecutedValidators[validators[j].name] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(dirtyValidators.length > 0){\r\n\t\t\tvar callBack = luga.lookupFunction(options.error);\r\n\t\t\tcallBack.apply(null, [options.formNode, dirtyValidators]);\r\n\t\t}\r\n\t\treturn dirtyValidators.length === 0;\r\n\t};\r\n\r\n\t/**\r\n\t * @typedef {Object} luga.validator.api.validateFields.options\r\n\t *\r\n\t * @property {jQuery} rootNode    A jQuery object wrapping the root node. Required\r\n\t * @property {function} error     Function to be invoked to handle/display validation messages.\r\n\t *                                Default to luga.validator.errorAlert\r\n\t */\r\n\r\n\t/**\r\n\t * Programmatically validate all fields contained inside a given node\r\n\t * @param {luga.validator.api.validateFields.options} options\r\n\t * @return {Boolean}\r\n\t */\r\n\tluga.validator.api.validateChildFields = function(options){\r\n\t\tvar fields = luga.form.utils.getChildFields(options.rootNode);\r\n\t\treturn luga.validator.api.validateFields({\r\n\t\t\tfields: fields,\r\n\t\t\terror: options.error\r\n\t\t});\r\n\t};\r\n\r\n\tluga.dom.ready(function(){\r\n\t\tluga.validator.initForms();\r\n\t});\r\n\r\n}());"],"sourceRoot":"."}