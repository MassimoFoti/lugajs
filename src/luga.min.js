/*! luga-js 2013-12-03 */
if("undefined"==typeof jQuery)throw"Unable to find jQuery";if("undefined"==typeof luga)var luga={};!function(){"use strict";luga.version=.2,luga.namespace=function(ns,rootObject){var parts=ns.split(".");rootObject||(rootObject=window);for(var len,i=0,len=parts.length;len>i;i++)rootObject[parts[i]]||(rootObject[parts[i]]={}),rootObject=rootObject[parts[i]];return rootObject},luga.extend=function(baseFunc,func,args){baseFunc.apply(func,args)},luga.merge=function(target,obj){jQuery.extend(target,obj)},luga.namespace("luga.utils"),luga.utils.CONST={CSS_CLASSES:{MESSAGE:"luga_message",ERROR_MESSAGE:"luga_error_message"},MSG_BOX_ID:"lugaMessageBox"},luga.utils.formatString=function(str,args){var pattern=null;if($.isArray(args))for(var i=0;i<args.length;i++)pattern=new RegExp("\\{"+i+"\\}","g"),str=str.replace(pattern,args[i]);if($.isPlainObject(args))for(var x in args)pattern=new RegExp("\\{"+x+"\\}","g"),str=str.replace(pattern,args[x]);return str},luga.utils.demoronizeString=function(str){return str=str.replace(new RegExp(String.fromCharCode(710),"g"),"^"),str=str.replace(new RegExp(String.fromCharCode(732),"g"),"~"),str=str.replace(new RegExp(String.fromCharCode(8216),"g"),"'"),str=str.replace(new RegExp(String.fromCharCode(8217),"g"),"'"),str=str.replace(new RegExp(String.fromCharCode(8220),"g"),'"'),str=str.replace(new RegExp(String.fromCharCode(8221),"g"),'"'),str=str.replace(new RegExp(String.fromCharCode(8211),"g"),"-"),str=str.replace(new RegExp(String.fromCharCode(8212),"g"),"--"),str=str.replace(new RegExp(String.fromCharCode(8218),"g"),","),str=str.replace(new RegExp(String.fromCharCode(8222),"g"),",,"),str=str.replace(new RegExp(String.fromCharCode(8226),"g"),"*"),str=str.replace(new RegExp(String.fromCharCode(8230),"g"),"...")},luga.utils.stringToFunction=function(str){if(jQuery.isFunction(str))return str;if(window[str]&&jQuery.isFunction(window[str]))return window[str];try{var evaluated=eval(str);if(evaluated&&jQuery.isFunction(evaluated))return evaluated}catch(e){}return null};var generateBoxId=function(node){var boxId=luga.utils.CONST.MSG_BOX_ID;return node.attr("id")?boxId+=node.attr("id"):node.attr("name")&&(boxId+=node.attr("name")),boxId},removeDisplayBox=function(node){var boxId=generateBoxId(jQuery(node)),oldBox=jQuery("#"+boxId);oldBox.length>0&&oldBox.remove()};luga.utils.displayMessage=function(node,html){return luga.utils.displayBox(node,html,luga.utils.CONST.CSS_CLASSES.MESSAGE)},luga.utils.displayErrorMessage=function(node,html){return luga.utils.displayBox(node,html,luga.utils.CONST.CSS_CLASSES.ERROR_MESSAGE)},luga.utils.displayBox=function(node,html,cssClass){cssClass||(cssClass=luga.utils.CONST.CSS_CLASSES.MESSAGE);var boxId=generateBoxId(jQuery(node)),box=jQuery("<div></div>");box.attr("id",boxId),box.addClass(cssClass),box.html(html);var oldBox=jQuery("#"+boxId);return oldBox.length>0?oldBox.replaceWith(box):jQuery(node).before(box),box},luga.namespace("luga.validationHandlers"),luga.validationHandlers.errorAlert=function(formNode,validators){for(var errorMsg="",focusGiven=!1,i=0;i<validators.length;i++)errorMsg+=validators[i].message+"\n",!focusGiven&&validators[i].getFocus&&(validators[i].getFocus(),focusGiven=!0);""!==errorMsg&&alert(errorMsg)},luga.validationHandlers.errorBox=function(formNode,validators){if(0===validators.length)return removeDisplayBox(formNode),void 0;for(var focusGiven=!1,htmlStr="<ul>",i=0;i<validators.length;i++)htmlStr+="<li><em>"+validators[i].name+": </em> "+validators[i].message+"</li>",!focusGiven&&validators[i].getFocus&&(validators[i].getFocus(),focusGiven=!0);htmlStr+="</ul>",luga.utils.displayErrorMessage(formNode,htmlStr)}}();