/*! Luga CSI 0.8 2015-09-22 20:09
Copyright 2013-15 Massimo Foti (massimo@massimocorner.com) 
Licensed under the Apache License, Version 2.0 | http://www.apache.org/licenses/LICENSE-2.0 
*/  
if("undefined"==typeof luga)throw"Unable to find Luga JS Core";!function(){"use strict";luga.namespace("luga.csi"),luga.csi.version=.8,luga.csi.CONST={NODE_SELECTOR:"div[data-luga-csi]",URL_ATTRIBUTE:"data-luga-csi",AFTER_ATTRIBUTE:"data-luga-after",MESSAGES:{FILE_NOT_FOUND:"luga.csi failed to retrieve text from: {0}"}},luga.csi.Include=function(options){var self=this;this.init=function(){jQuery.ajax({url:self.config.url,timeout:self.config.XHR_TIMEOUT,success:function(response,textStatus,jqXHR){self.config.success.apply(null,[response,textStatus,jqXHR]);var afterHandler=luga.lookup(self.config.after);null!==afterHandler&&afterHandler.apply(null,[self.config.rootNode,self.config.url,response])},error:function(jqXHR,textStatus,errorThrown){self.config.error.apply(null,[jqXHR,textStatus,errorThrown])}})},this.onSuccess=function(response){jQuery(self.config.rootNode).html(response)},this.onError=function(){throw luga.string.format(luga.csi.CONST.MESSAGES.FILE_NOT_FOUND,[self.config.url])},this.config={url:jQuery(options.rootNode).attr(luga.csi.CONST.URL_ATTRIBUTE),after:jQuery(options.rootNode).attr(luga.csi.CONST.AFTER_ATTRIBUTE),success:this.onSuccess,error:this.onError,xhrTimeout:5e3},luga.merge(this.config,options)},luga.csi.loadIncludes=function(){jQuery(luga.csi.CONST.NODE_SELECTOR).each(function(index,item){var includeObj=new luga.csi.Include({rootNode:item});includeObj.init()})},jQuery(document).ready(function(){luga.csi.loadIncludes()})}();